<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LocalStorage</title>
</head>

<body>
    <header>
        <h1>Avec le stockage local,</h1>
        <h2>il est possible de faire du stockage hors ligne grâce à l’API LocalStorage. On peut ainsi sauvegarder des
            données sous forme de chaines de caractères (des paires clé/valeur).</h2>
    </header>
    <article>
        <h3>Comment ça marche?</h3>
        <p>Stockées localement, les données ne sont jamais transmises au serveur web distant comme c'est le cas pour les
            cookies.</p>
           <p>Cette solution de stockage peut être être utilisée au même titre que les sessions en PHP à la différence
            qu'elle ne nécessite pas de requête HTTP.</p>
            <p>Ces données sont mémorisées à vie pour un même navigateur, elles peuvent être partagées entres les
            onglets et les pages du même site.</p>
            <p>L’espace de stockage maximum est de cinq mégaoctets par site. Les
            propriétés de stockage sont associées uniquement au domaine.</p>
            <p>Ne pas confondre avec "sessionStorage", qui maintient le stockage seulement lorsque que la fenêtre du
            navigateur est active.</p>
        <p>Le localStorage ou la sessionStorage récupèrent les données, les stockent et les suppriment.
        </p> 
    </article>
    <article>
        <h3>La syntaxe...</h3>

        <h4>...pour récupérer</h4>
        <ul>
            Au choix:
            <li>localStorage.getItem("cle");</li>
            <li>localStorage["cle"];</li>
            <li>localStorage.cle;</li>
        </ul>

        <h4>...pour stocker</h4>
        <ul>
            Au choix:
            <li>localStorage.setItem("cle", "valeur");</li>
            <li>localStorage["cle"] = "valeur";</li>
            <li>localStorage.cle = "valeur";</li>
        </ul>

        <h4>...pour afficher</h4>
        <ul>
            <li>...le nombre de paires:</li>
            <li>localStorage.length;</li>
            <li>...le nom de la clé:</li>
            <li>localStorage.key(0);</li>
            <li>...toutes les clés:</li>
            <li> for( let i = 0; i < localStorage.length; i++){ localStorage.key(i); }</li>
        </ul>

        <h4>...pour supprimer</h4>
        <ul>
            Au choix:
            <li>localStorage.removeItem("cle");</li>
            <li>localStorage.clear();</li>
        </ul>
    </article>
    <article>

        <h3>À savoir</h3>
        <span>
            La syntaxe localStorage.setItem() ne stocke que des valeurs sous forme de chaines de caractères. Pour
            mémoriser des valeurs complexes, on utilisera le format JSON (JavaScript Objet Notation) et on sérialise (ou
            linéarise) l’objet avec la syntaxe JSON.stringify() ce qui remplacera l'objet en chaîne de caractère.
            Inversement, pour la lecture, la syntaxe JSON.parse() reforme l’objet à partir de la chaîne linéarisée.
        </span>
        <div>Exemples:
        <ul>
            <li>
                let objJson = {<br>
                    prenom: "John",<br>
                    age: 30,<br>
                    taille: 180<br>
                }<br>
                let objLinea = JSON.stringify(objJson);<br>
                localStorage.setItem("obj", objLinea);<br>
            
            </li>
            <li>
                let objLinea = localStorage.getItem("obj");<br>
                let objJson = JSON.parse(objLinea);<br>
                alert(objJson.age) // renvoie 30<br>
                
            </li>
        </ul>
    </div>
    </article>
    <footer>

    </footer>
</body>

</html>